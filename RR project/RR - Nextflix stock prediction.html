<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Guozhao Tian, Yue Zhou">

<title>Reproducible Research Project: Netflix stock prediction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="RR - Nextflix stock prediction_files/libs/clipboard/clipboard.min.js"></script>
<script src="RR - Nextflix stock prediction_files/libs/quarto-html/quarto.js"></script>
<script src="RR - Nextflix stock prediction_files/libs/quarto-html/popper.min.js"></script>
<script src="RR - Nextflix stock prediction_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="RR - Nextflix stock prediction_files/libs/quarto-html/anchor.min.js"></script>
<link href="RR - Nextflix stock prediction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="RR - Nextflix stock prediction_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="RR - Nextflix stock prediction_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="RR - Nextflix stock prediction_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="RR - Nextflix stock prediction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="RR - Nextflix stock prediction_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="RR - Nextflix stock prediction_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Reproducible Research Project: Netflix stock prediction</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Guozhao Tian, Yue Zhou </p>
          </div>
  </div>
    
    
  </div>
  

</header>
<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#configure-the-environment-and-preprocess-data" id="toc-configure-the-environment-and-preprocess-data">1. Configure the environment and preprocess data</a>
  <ul>
  <li><a href="#library-packages" id="toc-library-packages">1.1 Library packages</a></li>
  <li><a href="#loading-and-processing-data" id="toc-loading-and-processing-data">1.2 Loading and processing data</a></li>
  </ul></li>
  <li><a href="#netflix-stock-chart" id="toc-netflix-stock-chart">2. Netflix stock chart</a>
  <ul>
  <li><a href="#generate-netflix-adjusted-close-prices-chart" id="toc-generate-netflix-adjusted-close-prices-chart">2.1 Generate Netflix Adjusted Close prices chart</a></li>
  <li><a href="#add-moving-average" id="toc-add-moving-average">2.2 Add Moving Average</a></li>
  </ul></li>
  <li><a href="#decomposition-of-the-time-series" id="toc-decomposition-of-the-time-series">3. Decomposition of the time series</a></li>
  <li><a href="#stationarity-test" id="toc-stationarity-test">4. Stationarity test</a>
  <ul>
  <li><a href="#acf-pacf-before-differencing" id="toc-acf-pacf-before-differencing">4.1 ACF PACF before differencing</a></li>
  <li><a href="#acf-and-pacf-after-difference" id="toc-acf-and-pacf-after-difference">4.2 ACF and PACF after difference</a></li>
  </ul></li>
  <li><a href="#arima-model" id="toc-arima-model">5. ARIMA Model</a>
  <ul>
  <li><a href="#arima212-acf-pacf" id="toc-arima212-acf-pacf">5.1 ARIMA(2,1,2) ACF PACF</a></li>
  <li><a href="#arima1133-acf-pacf" id="toc-arima1133-acf-pacf">5.2 ARIMA(1,1,33) ACF PACF</a></li>
  <li><a href="#arima1233-acf-pacf" id="toc-arima1233-acf-pacf">5.3 ARIMA(1,2,33) ACF PACF</a></li>
  </ul></li>
  <li><a href="#forecast" id="toc-forecast">6. Forecast</a>
  <ul>
  <li><a href="#arima212" id="toc-arima212">6.1 ARIMA(2,1,2)</a></li>
  <li><a href="#arima1133" id="toc-arima1133">6.2 ARIMA(1,1,33)</a></li>
  <li><a href="#arima1233" id="toc-arima1233">6.3 ARIMA(1,2,33)</a></li>
  </ul></li>
  <li><a href="#compare-3-arima-model" id="toc-compare-3-arima-model">7. Compare 3 ARIMA Model</a></li>
  <li><a href="#conclusion" id="toc-conclusion">8. Conclusion</a>
  <ul>
  <li><a href="#article-conclusion" id="toc-article-conclusion">8.1 Article Conclusion</a></li>
  <li><a href="#reproducible-research" id="toc-reproducible-research">8.2 Reproducible research</a></li>
  </ul></li>
  </ul>
</nav>
<section id="configure-the-environment-and-preprocess-data" class="level1">
<h1>1. Configure the environment and preprocess data</h1>
<section id="library-packages" class="level2">
<h2 class="anchored" data-anchor-id="library-packages">1.1 Library packages</h2>
<p>When creating the project, We fixed the versions of R studio and packages to ensure that the content can be reproduced.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmtest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(urca)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="loading-and-processing-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-and-processing-data">1.2 Loading and processing data</h2>
<p>The article first checks the description of the data.</p>
<p>We selected the same dataset (Netflix stock price from 2015 to 2020) according to the dataset description in the article.</p>
<p>Here prove that the dataset we use is consistent with the article.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"NFLX.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>Date, <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1260 obs. of  7 variables:
 $ Date     : Date, format: "2015-04-07" "2015-04-08" ...
 $ Open     : num  60.5 61.2 63 64.4 67.2 ...
 $ High     : num  60.8 63.1 63.1 65 69.3 ...
 $ Low      : num  60 61.2 62.1 63.9 67.1 ...
 $ Close    : num  60.5 63 62.8 64.9 67.8 ...
 $ Adj.Close: num  60.5 63 62.8 64.9 67.8 ...
 $ Volume   : int  9977100 22327900 13455400 22367100 44436700 28641900 42528500 104500900 58306500 30766400 ...</code></pre>
</div>
</div>
</section>
</section>
<section id="netflix-stock-chart" class="level1">
<h1>2. Netflix stock chart</h1>
<section id="generate-netflix-adjusted-close-prices-chart" class="level2">
<h2 class="anchored" data-anchor-id="generate-netflix-adjusted-close-prices-chart">2.1 Generate Netflix Adjusted Close prices chart</h2>
<p>Since we used the same dataset as the article, the trend chart is perfectly reproduced.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">xts</span>(data[, <span class="sc">-</span><span class="dv">1</span>],<span class="at">order.by =</span> data<span class="sc">$</span>Date,<span class="at">frequency =</span> <span class="dv">12</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract and work with Adjusted Close prices</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Adj.Close <span class="ot">&lt;-</span> data<span class="sc">$</span>Adj.Close</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot original Adjusted Close prices</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Adj.Close, <span class="at">main =</span> <span class="st">"NFLX Adjusted Close Prices"</span>, <span class="at">ylab =</span> <span class="st">"Price"</span>, <span class="at">xlab =</span> <span class="st">"Date"</span>, <span class="at">col =</span> <span class="st">"sky blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="add-moving-average" class="level2">
<h2 class="anchored" data-anchor-id="add-moving-average">2.2 Add Moving Average</h2>
<p>We added 7-day, 30-day and 365-day Moving Average respectively.</p>
<p>The trend chart is also perfectly reproduced here.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate weekly moving average (K=7)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>weekly_ma <span class="ot">&lt;-</span> <span class="fu">rollmean</span>(Adj.Close, <span class="at">k =</span> <span class="dv">7</span>, <span class="at">fill =</span> <span class="cn">NA</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate monthly moving average (K=30, approximating 1 month)</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>monthly_ma <span class="ot">&lt;-</span> <span class="fu">rollmean</span>(Adj.Close, <span class="at">k =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="cn">NA</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate yearly moving average (K=365, approximating 1 year)</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>yearly_ma <span class="ot">&lt;-</span> <span class="fu">rollmean</span>(Adj.Close, <span class="at">k =</span> <span class="dv">365</span>, <span class="at">fill =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot all moving averages</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Adj.Close, <span class="at">main =</span> <span class="st">"NFLX Adjusted Close Prices with Moving Averages"</span>, <span class="at">ylab =</span> <span class="st">"Price"</span>, <span class="at">xlab =</span> <span class="st">"Date"</span>, <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(weekly_ma, <span class="at">col =</span> <span class="st">"green"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(monthly_ma, <span class="at">col =</span> <span class="st">"sky blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(yearly_ma, <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Weekly MA"</span>, <span class="st">"Monthly MA"</span>, <span class="st">"Yearly MA"</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"green"</span>, <span class="st">"sky blue"</span>, <span class="st">"purple"</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="decomposition-of-the-time-series" class="level1">
<h1>3. Decomposition of the time series</h1>
<p>According to the requirements of the article, here we have done a decomposition of the time series data, in which seasonality, trends, data and reminders are identified, and seasonality is removed to improve the stationarity of the data.</p>
<p>It is worth mentioning that our results here are not consistent with the original article.</p>
<p>We found the reason when we couldnâ€™t reproduce 100% later. We specifically retain this difference, believing that it can reflect the problems that may be encountered in real reproduction operations.</p>
<p>This is because the original article chose to use the 7-day moving average as the main data, while we directly chose the original data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decomposition of the time series</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Adj.Close_ts <span class="ot">&lt;-</span> <span class="fu">as.ts</span>(Adj.Close)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>Adj.Close_ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">coredata</span>(Adj.Close), <span class="at">frequency =</span> <span class="dv">12</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>decomp <span class="ot">&lt;-</span> <span class="fu">decompose</span>(Adj.Close_ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting decompose results</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>))  <span class="co"># Setting up the plotting area</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(decomp<span class="sc">$</span>x, <span class="at">main =</span> <span class="st">"Original Data"</span>, <span class="at">ylab =</span> <span class="st">"Data"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(decomp<span class="sc">$</span>seasonal, <span class="at">main =</span> <span class="st">"Seasonal Component"</span>, <span class="at">ylab =</span> <span class="st">"Seasonal"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(decomp<span class="sc">$</span>trend, <span class="at">main =</span> <span class="st">"Trend Component"</span>, <span class="at">ylab =</span> <span class="st">"Trend"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(decomp<span class="sc">$</span>random, <span class="at">main =</span> <span class="st">"Random Component"</span>, <span class="at">ylab =</span> <span class="st">"Remainder"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="stationarity-test" class="level1">
<h1>4. Stationarity test</h1>
<section id="acf-pacf-before-differencing" class="level2">
<h2 class="anchored" data-anchor-id="acf-pacf-before-differencing">4.1 ACF PACF before differencing</h2>
<p>Here we recreate the stationarity test from the paper, first showing that the data are non-stationary before differencing.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plotting area to have 2 rows and 1 column</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>)) </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set smaller margins</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># c(bottom, left, top, right)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot your ACF and PACF with adjusted margins</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(Adj.Close, <span class="at">lag.max =</span> <span class="dv">60</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">"grey"</span>, <span class="at">na.action =</span> na.pass)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(Adj.Close,<span class="at">lag.max =</span> <span class="dv">36</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">"black"</span>,<span class="at">na.action =</span> na.pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the plotting area to the default</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>From the ADF test results, the p-value is equal to 0.3651, which further proves that the time series is not stationary.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The Augmented Dickey-Fuller (ADF) test for unit roots in a time series.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>adf_test <span class="ot">&lt;-</span> <span class="fu">ur.df</span>(Adj.Close, <span class="at">type =</span> <span class="st">"drift"</span>, <span class="at">selectlags =</span> <span class="st">"AIC"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adf_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
############################################### 
# Augmented Dickey-Fuller Test Unit Root Test # 
############################################### 

Test regression drift 


Call:
lm(formula = z.diff ~ z.lag.1 + 1 + z.diff.lag)

Residuals:
    Min      1Q  Median      3Q     Max 
-37.540  -2.260  -0.301   2.317  27.865 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)  0.592629   0.398307   1.488   0.1370  
z.lag.1     -0.001493   0.001647  -0.906   0.3651  
z.diff.lag  -0.072706   0.028243  -2.574   0.0102 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.284 on 1255 degrees of freedom
Multiple R-squared:  0.006004,  Adjusted R-squared:  0.00442 
F-statistic:  3.79 on 2 and 1255 DF,  p-value: 0.02285


Value of test-statistic is: -0.906 1.5655 

Critical values for test statistics: 
      1pct  5pct 10pct
tau2 -3.43 -2.86 -2.57
phi1  6.43  4.59  3.78</code></pre>
</div>
</div>
</section>
<section id="acf-and-pacf-after-difference" class="level2">
<h2 class="anchored" data-anchor-id="acf-and-pacf-after-difference">4.2 ACF and PACF after difference</h2>
<p>Here we have differentiated the data and obtained a stationary time series.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Difference the data and remove NAs</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>dadj <span class="ot">&lt;-</span> <span class="fu">na.exclude</span>(<span class="fu">diff.xts</span>(Adj.Close))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plotting area to have 2 rows and 1 column</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>)) </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># c(bottom, left, top, right)</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the ACF</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(dadj,<span class="at">lag.max =</span> <span class="dv">60</span>, <span class="at">lwd =</span> <span class="dv">5</span>,<span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass) </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the PACF</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(dadj,<span class="at">lag.max =</span> <span class="dv">36</span>,<span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the plotting area to the default</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The p-value is less than 0.05, so we can reject the null hypothesis and prove that the time series is stationary.</p>
<p>The results of the stationarity test are consistent with the original article. They are both non-stationary before differencing and stationary after differencing.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the ADF test on the differenced data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>adf_test_dadj <span class="ot">&lt;-</span> <span class="fu">ur.df</span>(dadj, <span class="at">type =</span> <span class="st">"drift"</span>, <span class="at">selectlags =</span> <span class="st">"AIC"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adf_test_dadj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
############################################### 
# Augmented Dickey-Fuller Test Unit Root Test # 
############################################### 

Test regression drift 


Call:
lm(formula = z.diff ~ z.lag.1 + 1 + z.diff.lag)

Residuals:
    Min      1Q  Median      3Q     Max 
-37.697  -2.221  -0.218   2.351  27.621 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.25489    0.17738   1.437   0.1510    
z.lag.1     -1.01287    0.04139 -24.470   &lt;2e-16 ***
z.diff.lag  -0.05655    0.02830  -1.998   0.0459 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.279 on 1254 degrees of freedom
Multiple R-squared:  0.5365,    Adjusted R-squared:  0.5358 
F-statistic: 725.9 on 2 and 1254 DF,  p-value: &lt; 2.2e-16


Value of test-statistic is: -24.4705 299.4042 

Critical values for test statistics: 
      1pct  5pct 10pct
tau2 -3.43 -2.86 -2.57
phi1  6.43  4.59  3.78</code></pre>
</div>
</div>
</section>
</section>
<section id="arima-model" class="level1">
<h1>5. ARIMA Model</h1>
<section id="arima212-acf-pacf" class="level2">
<h2 class="anchored" data-anchor-id="arima212-acf-pacf">5.1 ARIMA(2,1,2) ACF PACF</h2>
<p>We generated an ARIMA model (2, 1, 2) using auto arima.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Automatically fit ARIMA model</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">auto.arima</span>(Adj.Close, <span class="at">seasonal =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Adj.Close 
ARIMA(2,1,2) with drift 

Coefficients:
         ar1      ar2      ma1     ma2   drift
      0.2664  -0.5168  -0.3399  0.6094  0.2539
s.e.  0.1885   0.1432   0.1756  0.1328  0.1786

sigma^2 = 39.13:  log likelihood = -4092.27
AIC=8196.53   AICc=8196.6   BIC=8227.36</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data up to a specific date</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>cdata.shortx1 <span class="ot">&lt;-</span> Adj.Close[<span class="st">"/20171007"</span>, ]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit ARIMA(2, 1, 2) model</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>arima212 <span class="ot">&lt;-</span> <span class="fu">Arima</span>(cdata.shortx1,<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficients and summary</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(arima212)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Series: cdata.shortx1 
ARIMA(2,1,2) 

Coefficients:
         ar1     ar2      ma1      ma2
      0.0707  0.8651  -0.0662  -0.8748
s.e.  0.9926  1.0997   1.0675   1.1503

sigma^2 = 9.276:  log likelihood = -1598.63
AIC=3207.26   AICc=3207.36   BIC=3229.51

Training set error measures:
                    ME     RMSE      MAE       MPE     MAPE      MASE
Training set 0.2331183 3.033594 1.969616 0.1635537 1.720336 0.9974815
                   ACF1
Training set 0.01518222</code></pre>
</div>
</div>
<p>It shows some significant peaks in the ACF and PACF, and exceeds the limits.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plotting area to have 3 rows and 1 column</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)) </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># c(bottom, left, top, right)</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot residuals</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">resid</span>(arima212))</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF and PACF of residuals</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(<span class="fu">resid</span>(arima212),<span class="at">lag.max =</span> <span class="dv">60</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="at">main =</span> <span class="st">"ACF"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(<span class="fu">resid</span>(arima212),<span class="at">lag.max =</span> <span class="dv">36</span>, <span class="at">main =</span> <span class="st">"PACF"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the plotting area to the default</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The p-value in Ljung-box test is 0.9527. The very high p-value indicates that there is no evidence of autocorrelation in the residuals of this model. This means that the model residuals behave like white noise, which indicates a good model fit.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ljung-Box test</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The Box.test checks for the presence of autocorrelation in residuals. </span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(arima212), <span class="at">type =</span> <span class="st">"Ljung-Box"</span>, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(arima212)
X-squared = 0.33791, df = 3, p-value = 0.9527</code></pre>
</div>
</div>
</section>
<section id="arima1133-acf-pacf" class="level2">
<h2 class="anchored" data-anchor-id="arima1133-acf-pacf">5.2 ARIMA(1,1,33) ACF PACF</h2>
<p>The article then did not provide any further explanation and directly began to apply the ARIMA (1, 1, 33) and ARIMA (1, 2, 33) models.</p>
<p>So we also used these two models directly to be consistent with the original article.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit ARIMA(1, 1, 33) model</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>arima1133 <span class="ot">&lt;-</span> <span class="fu">Arima</span>(cdata.shortx1,<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>,<span class="dv">33</span>))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficient test and summary</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(arima1133)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Series: cdata.shortx1 
ARIMA(1,1,33) 

Coefficients:
         ar1      ma1      ma2     ma3      ma4      ma5     ma6      ma7
      0.9915  -1.0132  -0.0013  0.0146  -0.0311  -0.0523  0.1105  -0.0370
s.e.  0.0090   0.0418   0.0570  0.0576   0.0579   0.0577  0.0575   0.0587
         ma8      ma9     ma10   ma11     ma12    ma13     ma14    ma15
      0.0594  -0.0218  -0.0225  0.072  -0.0762  0.0362  -0.0719  0.0730
s.e.  0.0584   0.0588   0.0591  0.060   0.0611  0.0599   0.0591  0.0587
         ma16     ma17     ma18    ma19    ma20     ma21     ma22    ma23
      -0.0290  -0.0459  -0.0149  0.0173  0.0284  -0.0315  -0.1223  0.0661
s.e.   0.0589   0.0575   0.0569  0.0630  0.0587   0.0658   0.0655  0.0614
        ma24    ma25     ma26    ma27    ma28    ma29    ma30    ma31    ma32
      0.0460  0.0067  -0.1266  0.0956  0.0369  0.0758  0.0561  0.0284  -0.023
s.e.  0.0614  0.0679   0.0641  0.0601  0.0623  0.0598  0.0593  0.0635   0.072
         ma33
      -0.0805
s.e.   0.0473

sigma^2 = 8.823:  log likelihood = -1572.73
AIC=3215.47   AICc=3219.7   BIC=3371.18

Training set error measures:
                   ME     RMSE      MAE        MPE     MAPE     MASE
Training set 0.118754 2.887134 1.989618 0.06502541 1.741731 1.007611
                     ACF1
Training set -0.002141074</code></pre>
</div>
</div>
<p>From the plot, we can see that ARIMA(1, 1, 33) has no significant peaks beyond the ACF and PACF limits, which means the automatic ARIMA model is more accurate.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plotting area to have 3 rows and 1 column</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)) </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># c(bottom, left, top, right)</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot residuals</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">resid</span>(arima1133))</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF and PACF of residuals</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(<span class="fu">resid</span>(arima1133),<span class="at">lag.max =</span> <span class="dv">60</span>, <span class="at">main =</span> <span class="st">"ACF"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>),<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(<span class="fu">resid</span>(arima1133),<span class="at">lag.max =</span> <span class="dv">36</span>, <span class="at">main =</span> <span class="st">"PACF"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the plotting area to the default</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The p-value in the Ljung-box test is 0.9998. The p-value is very high, which strongly indicates that the residuals of this model do not show autocorrelation. This indicates that the model has an extremely high fit. However, there is a possibility of overfitting.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ljung-Box test</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The Box.test checks for the presence of autocorrelation in residuals. </span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(arima1133), <span class="at">type =</span> <span class="st">"Ljung-Box"</span>, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(arima1133)
X-squared = 0.0095174, df = 3, p-value = 0.9998</code></pre>
</div>
</div>
</section>
<section id="arima1233-acf-pacf" class="level2">
<h2 class="anchored" data-anchor-id="arima1233-acf-pacf">5.3 ARIMA(1,2,33) ACF PACF</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit ARIMA(1, 2, 33) model</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>arima1233 <span class="ot">&lt;-</span> <span class="fu">Arima</span>(cdata.shortx1<span class="sc">$</span>Adj.Close,<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>,<span class="dv">33</span>))</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficient test and summary</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(arima1233)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Series: cdata.shortx1$Adj.Close 
ARIMA(1,2,33) 

Coefficients:
          ar1      ma1      ma2     ma3      ma4      ma5     ma6     ma7
      -0.6328  -0.3892  -0.6549  0.0097  -0.0130  -0.0660  0.0806  0.0307
s.e.   0.1933   0.1915   0.1981  0.0509   0.0503   0.0509  0.0508  0.0540
         ma8     ma9     ma10    ma11     ma12     ma13     ma14    ma15
      0.0417  0.0092  -0.0339  0.0612  -0.0336  -0.0169  -0.0439  0.0218
s.e.  0.0515  0.0535   0.0520  0.0515   0.0547   0.0540   0.0529  0.0526
        ma16     ma17     ma18    ma19    ma20     ma21     ma22    ma23
      0.0267  -0.0676  -0.0511  0.0165  0.0356  -0.0171  -0.1458  0.0020
s.e.  0.0539   0.0513   0.0553  0.0520  0.0523   0.0558   0.0511  0.0561
        ma24    ma25     ma26    ma27    ma28    ma29    ma30    ma31     ma32
      0.0858  0.0389  -0.1197  0.0174  0.1106  0.0825  0.1119  0.0661  -0.0145
s.e.  0.0546  0.0569   0.0519  0.0597  0.0582  0.0531  0.0545  0.0606   0.0480
         ma33
      -0.1467
s.e.   0.0435

sigma^2 = 8.784:  log likelihood = -1571.98
AIC=3213.96   AICc=3218.2   BIC=3369.62

Training set error measures:
                      ME     RMSE      MAE         MPE     MAPE     MASE
Training set -0.01026401 2.878207 2.005145 -0.07090819 1.761555 1.015475
                     ACF1
Training set 0.0008954079</code></pre>
</div>
</div>
<p>ARIMA (1,2,33) was also tested for best accuracy as it did not show significant peaks beyond the ACF and PACF limits and was not much different from the ARIMA(1,1,33) results.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plotting area to have 3 rows and 1 column</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)) </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># c(bottom, left, top, right)</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot residuals</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">resid</span>(arima1233))</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF and PACF of residuals</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(<span class="fu">resid</span>(arima1233),<span class="at">lag.max =</span> <span class="dv">60</span>, <span class="at">main =</span> <span class="st">"ACF"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(<span class="fu">resid</span>(arima1233),<span class="at">lag.max =</span> <span class="dv">36</span>, <span class="at">main =</span> <span class="st">"PACF"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"dark green"</span>,<span class="at">na.action =</span> na.pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the plotting area to the default</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The p-value in the Ljung-box test is 0.9946. Similar to the other two models, this result indicates that there is no significant autocorrelation in the residuals, but there may also be overfitting.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ljung-Box test</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The Box.test checks for the presence of autocorrelation in residuals. </span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(<span class="fu">resid</span>(arima1233), <span class="at">type =</span> <span class="st">"Ljung-Box"</span>, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  resid(arima1233)
X-squared = 0.075477, df = 3, p-value = 0.9946</code></pre>
</div>
</div>
</section>
</section>
<section id="forecast" class="level1">
<h1>6. Forecast</h1>
<section id="arima212" class="level2">
<h2 class="anchored" data-anchor-id="arima212">6.1 ARIMA(2,1,2)</h2>
<p>Judging from the results of forecasts accuracy, although the model performs well in the train set, it has a large error in the test set.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(2,1,2) forecasts, 627 future values(50% of data) are forecasted.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>forecasts212 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(arima212, <span class="at">h =</span> <span class="dv">627</span>) </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(2,1,2) forecasts accuracy</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecasts212, Adj.Close[<span class="st">"20171007/"</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                      ME       RMSE        MAE        MPE      MAPE       MASE
Training set   0.2331183   3.033594   1.969616  0.1635537  1.720336  0.9974815
Test set     119.0435423 131.507419 119.826959 35.2654273 35.680439 60.6845140
                   ACF1
Training set 0.01518222
Test set             NA</code></pre>
</div>
</div>
<p>Forecast data processing</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract forecasted mean</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>forecasts212</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>forecasts212<span class="sc">$</span>mean</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check class and convert to numeric</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(forecasts212<span class="sc">$</span>mean)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(forecasts212<span class="sc">$</span>mean)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract forecast confidence intervals</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>forecasts212<span class="sc">$</span>lower</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>forecasts212<span class="sc">$</span>upper</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame for forecast data</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>forecasts212_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">f_mean  =</span> <span class="fu">as.numeric</span>(forecasts212<span class="sc">$</span>mean),</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">f_lower =</span> <span class="fu">as.numeric</span>(forecasts212<span class="sc">$</span>lower[, <span class="dv">2</span>]),</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">f_upper =</span> <span class="fu">as.numeric</span>(forecasts212<span class="sc">$</span>upper[, <span class="dv">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Splitting the dataset</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data up to a specific date</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>cdata.shortx1 <span class="ot">&lt;-</span> Adj.Close[<span class="st">"/20171007"</span>, ]</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the head and tail of the subset data</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cdata.shortx1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close
2015-04-07  60.49429
2015-04-08  63.05000
2015-04-09  62.78571
2015-04-10  64.93857
2015-04-13  67.81143
2015-04-14  68.38715</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(cdata.shortx1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close
2017-09-29    181.35
2017-10-02    177.01
2017-10-03    179.19
2017-10-04    184.45
2017-10-05    194.39
2017-10-06    198.02</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data from a specific date</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>cdata.shortx2 <span class="ot">&lt;-</span>Adj.Close[<span class="st">"20171007/"</span>, ]</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert forecast data to xts object</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>forecasts212_xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(forecasts212_data,<span class="at">order.by =</span><span class="fu">index</span>(cdata.shortx2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plot ARIMA(2,1,2) forecasts</p>
<p>From the figure we can see that the predicted results are very biased, but this is also consistent with the description of the model in the article.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert forecast data to xts object</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>forecasts212_xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(forecasts212_data,<span class="at">order.by =</span><span class="fu">index</span>(cdata.shortx2))</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge original data with forecast data</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>cdata212 <span class="ot">&lt;-</span> <span class="fu">merge</span>(Adj.Close,forecasts212_xts)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the merged data</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cdata212)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close f_mean f_lower f_upper
2015-04-07  60.49429     NA      NA      NA
2015-04-08  63.05000     NA      NA      NA
2015-04-09  62.78571     NA      NA      NA
2015-04-10  64.93857     NA      NA      NA
2015-04-13  67.81143     NA      NA      NA
2015-04-14  68.38715     NA      NA      NA</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(cdata212, <span class="at">n =</span><span class="dv">627</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close   f_mean   f_lower  f_upper
2017-10-09    196.87 197.9193 191.94998 203.8887
2017-10-10    195.08 197.8871 189.42621 206.3480
2017-10-11    194.95 197.7978 187.45989 208.1356
2017-10-12    195.86 197.7636 185.83106 209.6961
2017-10-13    199.49 197.6838 184.36700 211.0007
2017-10-16    202.68 197.6486 183.07299 212.2242
2017-10-17    199.48 197.5771 181.85809 213.2962
2017-10-18    195.54 197.5416 180.75380 214.3295
2017-10-19    195.13 197.4773 179.69596 215.2586
2017-10-20    194.16 197.4420 178.71823 216.1658
       ...                                      
2020-03-24    357.32 196.0605  59.12061 333.0004
2020-03-25    342.39 196.0605  59.01085 333.1102
2020-03-26    362.99 196.0605  58.90119 333.2198
2020-03-27    357.12 196.0605  58.79161 333.3294
2020-03-30    370.96 196.0605  58.68212 333.4389
2020-03-31    375.50 196.0605  58.57272 333.5483
2020-04-01    364.08 196.0605  58.46340 333.6576
2020-04-02    370.08 196.0605  58.35417 333.7668
2020-04-03    361.76 196.0605  58.24503 333.8760
2020-04-06    379.96 196.0605  58.13597 333.9850</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the merged data</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cdata212, <span class="at">main =</span> <span class="st">"Forecasts from ARIMA(2,1,2)"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="arima1133" class="level2">
<h2 class="anchored" data-anchor-id="arima1133">6.2 ARIMA(1,1,33)</h2>
<p>The results also show that there is a large error between the train set and the test set, but it is better than ARIMA (2, 1, 2).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(1,1,33) forecasts,627 future values are forecasted.</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>forecasts1133 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(arima1133, <span class="at">h =</span> <span class="dv">627</span>) </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(1,1,33) forecasts accuracy</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecasts1133, Adj.Close[<span class="st">"20171007/"</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                    ME      RMSE       MAE         MPE      MAPE      MASE
Training set  0.118754  2.887134  1.989618  0.06502541  1.741731  1.007611
Test set     51.208585 66.701909 55.927660 14.23134418 16.463762 28.323700
                     ACF1
Training set -0.002141074
Test set               NA</code></pre>
</div>
</div>
<p>Forecast data processing</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract forecasted mean</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>forecasts1133<span class="sc">$</span>mean</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check class and convert to numeric</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(forecasts1133<span class="sc">$</span>mean)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(forecasts1133<span class="sc">$</span>mean)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract forecast confidence intervals</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>forecasts1133<span class="sc">$</span>lower</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>forecasts1133<span class="sc">$</span>upper</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame for forecast data</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>forecasts1133_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">f_mean  =</span> <span class="fu">as.numeric</span>(forecasts1133<span class="sc">$</span>mean),</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">f_lower =</span> <span class="fu">as.numeric</span>(forecasts1133<span class="sc">$</span>lower[, <span class="dv">2</span>]),</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">f_upper =</span> <span class="fu">as.numeric</span>(forecasts1133<span class="sc">$</span>upper[, <span class="dv">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>From the figure we can see that the prediction results are obviously more accurate than before.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert forecast data to xts object</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>forecasts1133_xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(forecasts1133_data,<span class="at">order.by =</span><span class="fu">index</span>(cdata.shortx2))</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge original data with forecast data</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>cdata1133 <span class="ot">&lt;-</span> <span class="fu">merge</span>(Adj.Close,forecasts1133_xts)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the merged data</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cdata1133)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close f_mean f_lower f_upper
2015-04-07  60.49429     NA      NA      NA
2015-04-08  63.05000     NA      NA      NA
2015-04-09  62.78571     NA      NA      NA
2015-04-10  64.93857     NA      NA      NA
2015-04-13  67.81143     NA      NA      NA
2015-04-14  68.38715     NA      NA      NA</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(cdata1133, <span class="at">n =</span><span class="dv">627</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close   f_mean   f_lower  f_upper
2017-10-09    196.87 199.0006 193.16978 204.8314
2017-10-10    195.08 199.4739 191.30518 207.6427
2017-10-11    194.95 199.7460 189.84063 209.6514
2017-10-12    195.86 198.7573 187.39485 210.1197
2017-10-13    199.49 199.4647 186.90768 212.0218
2017-10-16    202.68 200.4825 187.03349 213.9314
2017-10-17    199.48 200.3289 186.00505 214.6528
2017-10-18    195.54 200.8130 185.69916 215.9269
2017-10-19    195.13 201.2593 185.32133 217.1972
2017-10-20    194.16 202.4778 185.72433 219.2313
       ...                                      
2020-03-24    357.32 281.6241 -31.96276 595.2110
2020-03-25    342.39 281.6284 -32.31211 595.5689
2020-03-26    362.99 281.6326 -32.66114 595.9264
2020-03-27    357.12 281.6368 -33.00984 596.2835
2020-03-30    370.96 281.6410 -33.35821 596.6402
2020-03-31    375.50 281.6451 -33.70625 596.9965
2020-04-01    364.08 281.6492 -34.05397 597.3524
2020-04-02    370.08 281.6532 -34.40136 597.7079
2020-04-03    361.76 281.6573 -34.74842 598.0630
2020-04-06    379.96 281.6613 -35.09516 598.4177</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the merged data</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cdata1133, <span class="at">main =</span> <span class="st">"Forecasts from ARIMA(1,1,33)"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="arima1233" class="level2">
<h2 class="anchored" data-anchor-id="arima1233">6.3 ARIMA(1,2,33)</h2>
<p>The results here show that the errors for both the train set and test set have increased again.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(1,2,33) forecasts,627 future values are forecasted.</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>forecasts1233 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(arima1233, <span class="at">h =</span> <span class="dv">627</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(1,2,33) forecasts accuracy</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecasts1233, Adj.Close[<span class="st">"20171007/"</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                        ME       RMSE        MAE          MPE      MAPE
Training set   -0.01026401   2.878207   2.005145  -0.07090819  1.761555
Test set     -157.75418343 216.382343 165.547546 -49.88776548 52.089527
                  MASE         ACF1
Training set  1.015475 0.0008954079
Test set     83.839000           NA</code></pre>
</div>
</div>
<p>Forecast data processing</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract forecasted mean</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>forecasts1233<span class="sc">$</span>mean</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check class and convert to numeric</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(forecasts1233<span class="sc">$</span>mean)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(forecasts1233<span class="sc">$</span>mean)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract forecast confidence intervals</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>forecasts1233<span class="sc">$</span>lower</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>forecasts1233<span class="sc">$</span>upper</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame for forecast data</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>forecasts1233_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">f_mean  =</span> <span class="fu">as.numeric</span>(forecasts1233<span class="sc">$</span>mean),</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">f_lower =</span> <span class="fu">as.numeric</span>(forecasts1233<span class="sc">$</span>lower[, <span class="dv">2</span>]),</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">f_upper =</span> <span class="fu">as.numeric</span>(forecasts1233<span class="sc">$</span>upper[, <span class="dv">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>From the figure we can see that the prediction results are obviously too high.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert forecast data to xts object</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>forecasts1233_xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(forecasts1233_data,<span class="at">order.by =</span><span class="fu">index</span>(cdata.shortx2))</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge original data with forecast data</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>cdata1233 <span class="ot">&lt;-</span> <span class="fu">merge</span>(Adj.Close,forecasts1233_xts)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the merged data</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cdata1233)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close f_mean f_lower f_upper
2015-04-07  60.49429     NA      NA      NA
2015-04-08  63.05000     NA      NA      NA
2015-04-09  62.78571     NA      NA      NA
2015-04-10  64.93857     NA      NA      NA
2015-04-13  67.81143     NA      NA      NA
2015-04-14  68.38715     NA      NA      NA</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(cdata1233, <span class="at">n =</span><span class="dv">627</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Adj.Close   f_mean   f_lower   f_upper
2017-10-09    196.87 199.1558  193.3331  204.9785
2017-10-10    195.08 199.7574  191.5938  207.9211
2017-10-11    194.95 200.2867  190.4035  210.1700
2017-10-12    195.86 199.7047  188.3929  211.0164
2017-10-13    199.49 200.8192  188.3278  213.3106
2017-10-16    202.68 202.2992  188.9214  215.6770
2017-10-17    199.48 202.1623  187.9045  216.4201
2017-10-18    195.54 203.1059  188.0517  218.1602
2017-10-19    195.13 204.0432  188.1416  219.9449
2017-10-20    194.16 205.6828  188.9480  222.4175
       ...                                       
2020-03-24    357.32 749.8516 -331.9562 1831.6595
2020-03-25    342.39 750.7635 -333.6996 1835.2267
2020-03-26    362.99 751.6754 -335.4452 1838.7961
2020-03-27    357.12 752.5873 -337.1929 1842.3676
2020-03-30    370.96 753.4992 -338.9429 1845.9413
2020-03-31    375.50 754.4111 -340.6950 1849.5172
2020-04-01    364.08 755.3230 -342.4492 1853.0953
2020-04-02    370.08 756.2349 -344.2056 1856.6755
2020-04-03    361.76 757.1468 -345.9642 1860.2579
2020-04-06    379.96 758.0587 -347.7249 1863.8424</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the merged data</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cdata1233, <span class="at">main =</span> <span class="st">"Forecasts from ARIMA(1,2,33)"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="compare-3-arima-model" class="level1">
<h1>7. Compare 3 ARIMA Model</h1>
<p>From the comparison chart, we can see that compared with the other two models, the prediction results of ARIMA (1, 1, 33) are more accurate.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)) </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cdata212, <span class="at">main =</span> <span class="st">"Forecasts from ARIMA(2,1,2)"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cdata1133, <span class="at">main =</span> <span class="st">"Forecasts from ARIMA(1,1,33)"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cdata1233, <span class="at">main =</span> <span class="st">"Forecasts from ARIMA(1,2,33)"</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RR---Nextflix-stock-prediction_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the plotting area to the default</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This can be seen more clearly from the comparison of forecasts accuracy.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare 3 ARIMA model accuracy</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(2,1,2) forecasts accuracy</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecasts212, Adj.Close[<span class="st">"20171007/"</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                      ME       RMSE        MAE        MPE      MAPE       MASE
Training set   0.2331183   3.033594   1.969616  0.1635537  1.720336  0.9974815
Test set     119.0435423 131.507419 119.826959 35.2654273 35.680439 60.6845140
                   ACF1
Training set 0.01518222
Test set             NA</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(1,1,33) forecasts accuracy</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecasts1133, Adj.Close[<span class="st">"20171007/"</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                    ME      RMSE       MAE         MPE      MAPE      MASE
Training set  0.118754  2.887134  1.989618  0.06502541  1.741731  1.007611
Test set     51.208585 66.701909 55.927660 14.23134418 16.463762 28.323700
                     ACF1
Training set -0.002141074
Test set               NA</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate ARIMA(1,2,33) forecasts accuracy</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecasts1233, Adj.Close[<span class="st">"20171007/"</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                        ME       RMSE        MAE          MPE      MAPE
Training set   -0.01026401   2.878207   2.005145  -0.07090819  1.761555
Test set     -157.75418343 216.382343 165.547546 -49.88776548 52.089527
                  MASE         ACF1
Training set  1.015475 0.0008954079
Test set     83.839000           NA</code></pre>
</div>
</div>
</section>
<section id="conclusion" class="level1">
<h1>8. Conclusion</h1>
<section id="article-conclusion" class="level2">
<h2 class="anchored" data-anchor-id="article-conclusion">8.1 Article Conclusion</h2>
<p>This study uses Netflix stock historical data for the past five years (April 7, 2015 to April 7, 2020) to compare the results of the automatic ARIMA model and two custom ARIMA models.</p>
<p>After multiple tests, the calculated values â€‹â€‹of ARIMA (1,1,33) show accurate results, which indicates that using ARIMA models on time series data can accurately predict stock data, which will help stock investors make investment decisions. The ARIMA (1,1,33) forecast for Netflix stock shows continuity of value.</p>
</section>
<section id="reproducible-research" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-research">8.2 Reproducible research</h2>
<p>First of all, we do not discuss whether the conclusions in the article are correct. Our focus is on whether the research can be reproduced.</p>
<p>There are still some details that cannot be reproduced 100%. For example, the automatic ARIMA model we obtained is (2, 1, 2), while the automatic ARIMA model obtained in the article is (4, 1, 4).</p>
<p>We think the reasons for non-reproducibility are:</p>
<ol type="1">
<li>The dataset used is wrong. We used the original adjusted close prices, while the article used the 7-day moving average.</li>
<li>It is not clear how the authors removed seasonality in the time series decomposition. They may have used a different code.</li>
</ol>
<p>Despite this, we have completely replicated all the operations in the article, and the results obtained are consistent with those in the article.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



<script src="RR - Nextflix stock prediction_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>